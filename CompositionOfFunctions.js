// Composition of Functions

// (**) Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ½Ğ° Ğ¿Ğ¾Ğ½ÑÑ‚Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
// Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ:

// Ğ’ Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞµ ĞµÑÑ‚ÑŒ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ¸Ğµ, ĞºĞ°Ğº ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹. Ğ’ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¸ĞµĞ¼ Ñ‚Ğ¾Ğ¶Ğµ Ğ¿ĞµÑ€ĞµĞºĞ¾Ñ‡ĞµĞ²Ğ°Ğ» Ğ¸ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ²ĞµÑÑŒĞ¼Ğ° ÑƒĞ´Ğ¾Ğ±Ğ½Ñ‹Ğ¼ Ğ² Ñ‡Ğ°ÑÑ‚Ğ¸ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¹.

// Ğ”Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼, Ñƒ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ² Ğ¸Ñ‚Ğ¾Ğ³Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑÑÑ‚ ÑĞºĞ¸Ğ´ĞºÑƒ:

// const multiply20 = (price) => price * 20;
// const divide100 = (price) => price / 100;
// const normalizePrice = (price) => price.toFixed(2);
// Ğ’ Ğ¸Ñ‚Ğ¾Ğ³Ğµ Ğ¼Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚, Ğ½Ğ¾ ÑÑ‚Ğ° Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° Ğ½Ğµ ÑĞ¾Ğ²ÑĞµĞ¼ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ°. Ğ ĞµÑĞ»Ğ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ñ‚Ğ°Ğ¼ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¼Ğ½Ğ¾Ğ³Ğ¾? ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞµÑ‘ Ğ²Ğ¾Ñ‚ Ñ‚Ğ°Ğº:

// // result = a(b(c(x)))
// const discount = normalizePrice(divide100(multiply20(200)));
// ĞĞ¾ Ğ¿Ñ€Ğ¸ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ ÑÑ‚Ğ¾ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒÑÑ Ğ² Ğ½ĞµÑ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ°Ğ´. Ğ˜ Ğ²Ğ¾Ñ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ² Ñ‚Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ compose, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ÑÑ‚Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¸ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ. Ğ¢Ğ¾ ĞµÑÑ‚ÑŒ, Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹. ĞĞ±Ñ€Ğ°Ñ‚Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ - Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¸ Ğ´Ğ°Ğ»ÑŒÑˆĞµ ÑĞ¿Ñ€Ğ°Ğ²Ğ° Ğ½Ğ°Ğ»ĞµĞ²Ğ¾. Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ğ°Ğ¼ Ğ¿Ğ¾Ğ½Ğ°Ğ´Ğ¾Ğ±Ğ¸Ñ‚ÑÑ ÑÑ‚Ğ¾.

// const discount = compose(normalizePrice, divide100, multiply20);
// discount(200.0);
// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑƒĞ³Ğ¾Ğ´Ğ½Ğ¾ Ğ¸ Ğ¾Ğ½Ğ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚. Ğ¢Ğ°Ğº Ñ‡Ñ‚Ğ¾ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚:

// const compose = (a, b, c) => (x) => a(b(c(x)));

// ĞĞµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚, Ñ‚Ğ°Ğº ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ 3Ğ¼Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸.

// P.S. Ğ”Ğ°, Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ñ‚Ğ°ĞºĞ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ ÑƒĞ¶Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ·Ğ° Ğ½Ğ°Ñ, Ğ¼Ñ‹ Ğ±ÑƒĞ´ĞµĞ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ñ Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¿Ğ¾ React. ĞĞ¾ ĞºĞ°Ğº Ğ¾Ğ½Ğ¾ ÑƒÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ğ¸Ğ·Ğ½ÑƒÑ‚Ñ€Ğ¸, Ğ´Ğ° Ğ¸ Ğ²Ğ¾Ğ¾Ğ±Ñ‰Ğµ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ¸Ğµ Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‚ÑŒ. Ğ›Ğ¸Ñ‡Ğ½Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°Ğ»Ğ¸ Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ Ğ½Ğ° ÑĞºĞ·Ğ°Ğ¼ĞµĞ½Ğ°Ñ… Ğ² ÑƒĞ½Ğ¸Ğ²ĞµÑ€Ğµ ĞºĞ¾Ğ³Ğ´Ğ°-Ñ‚Ğ¾ ğŸ™‚

// Ğ£ÑĞ»Ğ¾Ğ¶Ğ½ĞµĞ½Ğ½Ğ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ!

// Ğ¡Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¸ÑÑŒ Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ñ‡Ğ°ÑÑ‚ÑŒÑ? Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾, Ğ´Ğ°Ğ²Ğ°Ğ¹Ñ‚Ğµ ÑƒÑĞ»Ğ¾Ğ¶Ğ½Ğ¸Ğ¼ ğŸ™‚

// Ğ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ composeWithArgs, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑƒĞ³Ğ¾Ğ´Ğ½Ğ¾ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² Ğ½Ğ°Ñ‡Ğ°Ğ»Ğµ. ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:

//     const add1 = function(a){return a + 1}
//     const addAll3 = function(a,b,c){return a + b + c}
//     composeWithArgs(add1,addAll3)(1,2,3)  => Ğ’ĞµÑ€Ğ½ĞµÑ‚ 7

const multiply20 = (price) => price * 20;
const divide100 = (price) => price / 100;
const normalizePrice = (price) => price.toFixed(2);

const compose = (...args) => (x) => {
  return args.reduceRight((res, fn) => {
    return fn(res);
  }, x)
};

console.log(compose(normalizePrice, divide100, multiply20)(200));

const add1 = function(a){return a + 1}
const addAll3 = function(a,b,c){return a + b + c}

const composeWithArgs = (...fns) => fns.reduceRight((f, g) => (...args) => g(f(...args)));

console.log(composeWithArgs(add1, addAll3)(1,2,3)); //  => Ğ’ĞµÑ€Ğ½ĞµÑ‚ 7


// const composeWithArgs = (...args) => (...x) => {
//   return args.reduceRight((res, fn) => {
//     return Array.isArray(res) ? fn(...res) : fn(res);
//   }, x)
// };
